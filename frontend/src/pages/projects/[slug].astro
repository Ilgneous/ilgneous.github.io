---
import { getCollection, getEntry } from "astro:content";
import Layout from "../layouts/Layout.astro";        // if file is src/pages/projects/[slug].astro
// import Layout from "../../layouts/Layout.astro";   // if your layout is at src/layouts/Layout.astro

export async function getStaticPaths() {
  const items = await getCollection("projects");
  return items.map((entry) => ({ params: { slug: entry.slug } }));
}

const { slug } = Astro.params;
const entry = await getEntry("projects", slug!);
if (!entry) throw new Error(`Project not found: ${slug}`);

const { data } = entry;
const { Content } = await entry.render();

const B = import.meta.env.BASE_URL;
---

<Layout title={data.title} B={B}>
  <a href={`${B}projects`} class="underline">‚Üê All projects</a>

  <header class="mt-3">
    <h1 class="text-3xl font-bold">{data.title}</h1>
    <p class="opacity-80 mt-1">{data.summary}</p>
  </header>

  <article class="prose prose-zinc dark:prose-invert mt-8 max-w-none">
    <Content />
  </article>
</Layout>
