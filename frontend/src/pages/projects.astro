---
import { getCollection } from "astro:content";
import ProjectFilter from "../components/ProjectFilter.svelte";

const items = await getCollection("projects");
const B = import.meta.env.BASE_URL;

// Build hrefs with BASE_URL so they work on GitHub Pages
const projects = items.map((e) => ({
  title: e.data.title,
  href: `${B}projects/${e.slug}`,
  tech: e.data.tech,
}));
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Projects</title>
    <link rel="icon" href={`${B}favicon.svg`} />
    <link rel="stylesheet" href={'/src/styles/global.css'} />
  </head>
  <body class="mx-auto max-w-3xl p-6">
    <header class="flex items-center justify-between gap-4">
      <div class="flex items-center gap-4">
        <img src={`${B}favicon.svg`} alt="Logo" class="size-10" />
        <div>
          <h1 class="text-3xl font-bold">Sivan Syed</h1>
          <p class="opacity-80">Physics & ECE • Robotics • Controls • Systems</p>
        </div>
      </div>
      <nav class="text-sm">
        <a class="underline" href={`${B}`}>Home</a>
        <a class="underline ml-3" href={`${B}projects`}>Projects</a>
        <a class="underline ml-3" href={`${B}now`}>/now</a>
        <a class="underline ml-3" href={`${B}uses`}>/uses</a>
      </nav>
    </header>

    <h1 class="text-3xl font-bold mt-8 mb-4">Projects</h1>

    <!-- Svelte component renders/filter the list -->
    <ProjectFilter client:load projects={projects} />
  </body>
</html>
