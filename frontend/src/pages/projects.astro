---
import "../styles/global.css";
import { getCollection } from "astro:content";
import ProjectFilter from "../components/ProjectFilter.svelte";

const items = await getCollection("projects");
const B = import.meta.env.BASE_URL;

const projects = items.map((e) => ({
  title: e.data.title,
  href: `${B}projects/${e.slug}`,
  tech: e.data.tech,
  summary: e.data.summary ?? "",
  image: e.data.image
    ? `${B}${e.data.image}`
    : `${B}images/projects/${e.slug}.jpg`,
}));

const page = {
  title: "Projects | Sivan Syed",
  description: "Selected work across ECE, physics, robotics, and systems — with notes and build details.",
};
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{page.title}</title>
    <meta name="description" content={page.description} />
    <link rel="icon" href={`${B}favicon.svg`} />
  </head>
  <body class="min-h-screen overflow-x-hidden bg-gradient-to-b from-black via-zinc-950 to-black text-zinc-100 antialiased selection:bg-indigo-500/20">
    {/* Decorative background */}
    <div aria-hidden class="pointer-events-none fixed inset-0 -z-20">
      <div class="absolute inset-0 [mask-image:radial-gradient(70%_50%_at_50%_0%,black,transparent)]">
        <div class="absolute inset-0 opacity-[0.04] [background-image:linear-gradient(to_right,theme(colors.zinc.400/20)_1px,transparent_1px),linear-gradient(to_bottom,theme(colors.zinc.400/20)_1px,transparent_1px)] [background-size:40px_40px] [background-position:center]"></div>
        <div class="absolute -top-24 left-1/2 h-[36rem] w-[72rem] -translate-x-1/2 rounded-full bg-gradient-to-r from-zinc-200/10 via-indigo-400/15 to-zinc-200/10 blur-3xl"></div>
      </div>
    </div>

    {/* Header (matches tutoring/index/now) */}
    <header class="sticky top-0 z-50 backdrop-blur supports-[backdrop-filter]:bg-zinc-950/55 border-b border-zinc-800/60">
      <div class="mx-auto flex max-w-7xl items-center justify-between gap-4 px-6 md:px-12 lg:px-20 py-4">
        <a href={`${B}`} class="group flex items-center gap-3">
          <img src={`${B}favicon.svg`} alt="Logo" class="size-9 transition-transform duration-300 group-hover:rotate-6" />
          <div>
            <h1 class="text-2xl font-semibold tracking-tight">Sivan Syed</h1>
            <p class="text-xs text-zinc-400">Physics & ECE • Robotics • Controls • Systems</p>
          </div>
        </a>
        <nav class="flex items-center gap-2 text-sm">
          <a class="navlink" href={`${B}`}>Home</a>
          <a class="navlink" href={`${B}projects`}>Projects</a>
          <a class="navlink" href={`${B}tutoring`}>Tutoring</a>
          <a class="navlink" href={`${B}now`}>Now</a>
          <a class="navlink" href={`/SyedS_ResumeELC_Print.pdf`} target="_blank">Resume</a>
        </nav>
      </div>
    </header>

    {/* Main */}
    <main class="mx-auto max-w-[90rem] px-6 md:px-12 lg:px-20 py-10 md:py-14 space-y-24">
      {/* Hero */}
      <section class="mx-auto max-w-6xl">
        <p class="text-xs uppercase tracking-[0.2em] text-zinc-400/90">Projects • Hardware • Software • Theory→Practice</p>
        <h2 class="mt-3 text-4xl font-bold leading-tight md:text-5xl">
          <span class="bg-gradient-to-r from-zinc-100 via-zinc-400 to-zinc-100 bg-clip-text text-transparent [text-shadow:0_0_0.5px_rgba(255,255,255,0.35)] animate-shimmer">Selected builds & research</span>
        </h2>
        <p class="mt-4 max-w-3xl text-lg text-zinc-300/90">
          A mix of lab projects, prototypes, and research notes—each card links to a write‑up with diagrams, code, and lessons learned.
        </p>
      </section>

      <hr class="section-divider-glow" />

      {/* Filter */}
      <section class="section">
        <h3 class="section-title">Filter by topic</h3>
        <div class="card">
          <div class="card-border"></div>
          <ProjectFilter client:load projects={projects} baseUrl={B} />
        </div>
      </section>

      <hr class="section-divider-glow" />

      {/* CTA */}
      <section class="section">
        <div class="card">
          <div class="card-border"></div>
          <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
            <div>
              <h3 class="text-lg font-semibold">Want a deep‑dive on a project?</h3>
              <p class="mt-1 text-sm text-zinc-300">I can share design docs, small‑signal derivations, or additional plots on request.</p>
            </div>
            <div class="flex gap-3">
              <a href={`${B}tutoring#contact`} class="btn-ghost">Ask a question</a>
              <a href={`${B}now`} class="btn-primary">See what I'm doing now</a>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="mx-auto max-w-7xl px-6 md:px-12 lg:px-20 pb-10 pt-6 text-sm text-zinc-500/90">
      <div class="flex items-center justify-between border-t border-zinc-800/70 pt-4">
        <p>© {new Date().getFullYear()} Sivan Syed</p>
        <a class="underline decoration-zinc-400/30 underline-offset-2 hover:decoration-zinc-200/60" href={`${B}`}>Back to home</a>
      </div>
    </footer>
  </body>
</html>