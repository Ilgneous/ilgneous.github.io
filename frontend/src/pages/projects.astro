---
import "../styles/global.css";
import { getCollection } from "astro:content";
import ProjectFilter from "../components/ProjectFilter.svelte";

const items = await getCollection("projects");
const B = import.meta.env.BASE_URL;

const projects = items.map((e) => ({
  title: e.data.title,
  href: `${B}projects/${e.slug}`,
  tech: e.data.tech,
  summary: e.data.summary ?? "",
  image: e.data.image
    ? `${B}${e.data.image}`                              // e.g. "images/projects/ping-pong.jpg"
    : `${B}images/projects/${e.slug}.jpg`,              // fallback convention by slug
}));
---


<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Projects</title>
    <link rel="icon" href={`${B}favicon.svg`} />
  </head>
  <body class="mx-auto max-w-3xl p-6">
    <header class="flex items-center justify-between gap-4">
      <div class="flex items-center gap-4">
        <img src={`${B}favicon.svg`} alt="Logo" class="size-10" />
        <div>
          <h1 class="text-3xl font-bold">Sivan Syed</h1>
          <p class="opacity-80">Physics & ECE • Robotics • Controls • Systems</p>
        </div>
      </div>
      <nav class="text-sm">
        <a class="underline" href={`${B}`}>Home</a>
        <a class="underline ml-3" href={`${B}projects`}>Projects</a>
        <a class="underline ml-3" href={`${B}now`}>Now</a>
        <a class="underline ml-3" href={`/SyedS_ResumeELC_Print.pdf`} target="_blank">Resume</a>
      </nav>
    </header>

    <h1 class="text-3xl font-bold mt-8 mb-4">Projects</h1>

    <ProjectFilter client:load projects={projects} baseUrl={B} />
  </body>
</html>
