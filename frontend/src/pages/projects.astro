---
import { getCollection } from "astro:content";

// Fetch all project entries
const projects = (await getCollection("projects"))
  .sort((a, b) => (a.data.order ?? 999) - (b.data.order ?? 999));
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Projects</title>
    <link rel="stylesheet" href="/src/styles/global.css" />
  </head>
  <body class="mx-auto max-w-3xl p-6">
    <h1 class="text-3xl font-bold mb-6">Projects</h1>

    <div class="grid gap-6">
      {projects.map((entry) => (
        <a
          href={`/projects/${entry.slug}`}
          class="block rounded-xl border p-4 hover:shadow-lg transition"
        >
          <h2 class="text-xl font-semibold">{entry.data.title}</h2>
          <p class="mt-2 text-sm opacity-80">{entry.data.summary}</p>
          <div class="mt-3 text-xs opacity-70">
            {entry.data.tech.join(" â€¢ ")}
          </div>
          {entry.data.hero && (
            <img
              src={entry.data.hero}
              alt=""
              class="mt-3 rounded-lg"
              loading="lazy"
            />
          )}
        </a>
      ))}
    </div>
  </body>
</html>
