---
import "../styles/global.css";
import ContactForm from "../components/ContactForm.svelte";
import { getCollection } from "astro:content";

interface Project { title: string; href?: string; tech?: string[] }

const API =
  import.meta.env.PUBLIC_API_URL ??
  (import.meta.env.DEV ? "http://localhost:8000" : undefined);

let projects: Project[] = [];

if (API) {
  try {
    const r = await fetch(`${API}/api/projects`);
    if (r.ok) projects = await r.json();
  } catch {
    projects = [];
  }
}

if (projects.length === 0) {
  const entries = await getCollection("projects");
  projects = entries.map((e) => ({
    title: e.data.title,
    href: `/projects/${e.slug}`,
    tech: e.data.tech,
  }));
}
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Contact - Sivan Syed</title>
    <meta name="description" content="Get in touch with Sivan Syed." />
    <meta property="og:title" content="Contact - Sivan Syed" />
    <meta property="og:description" content="Get in touch with Sivan Syed." />
    <meta property="og:image" content={`/og.png`} />
    <link rel="icon" href={`/favicon.svg`} />
  </head>
  <body class="mx-auto max-w-3xl p-6">
    <header class="flex items-center justify-between gap-4">
      <div class="flex items-center gap-4">
        <header class="flex items-center justify-between gap-4">
        <div class="flex items-center gap-4">
            <a href="/" class="shrink-0">
            <img src={`/favicon.svg`} alt="Logo" class="size-10" />
            </a>
            <div>
            <h1 class="text-3xl font-bold">Contact</h1>
            <p class="opacity-80">Get in touch with me!</p>
            </div>
        </div>
        </header>
      </div>
    </header>

    <section class="mt-6 border rounded-2xl p-4">
      <ContactForm client:load apiBase={API} />
    </section>

    <!-- LinkedIn Section -->
    <section class="mt-6 text-center">
      <p class="text-lg">Or connect with me on:</p>
      <a 
        href="https://www.linkedin.com/in/sivan-syed/" 
        target="_blank" 
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 mt-2 text-blue-600 hover:underline"
      >
        <!-- LinkedIn Icon (SVG) -->
        <svg 
          xmlns="http://www.w3.org/2000/svg" 
          width="24" 
          height="24" 
          fill="currentColor" 
          viewBox="0 0 24 24"
        >
          <path d="M19 0h-14c-2.76 0-5 2.24-5 5v14c0 2.76 
                   2.24 5 5 5h14c2.76 0 5-2.24 
                   5-5v-14c0-2.76-2.24-5-5-5zm-11 
                   19h-3v-10h3v10zm-1.5-11.27c-.97 
                   0-1.75-.79-1.75-1.76s.78-1.75 
                   1.75-1.75 1.75.78 
                   1.75 1.75-.78 1.76-1.75 
                   1.76zm13.5 11.27h-3v-5.6c0-1.34-.03-3.06-1.87-3.06-1.87 
                   0-2.16 1.46-2.16 2.96v5.7h-3v-10h2.88v1.36h.04c.4-.76 
                   1.38-1.56 2.84-1.56 3.04 0 3.6 
                   2 3.6 4.6v5.6z"/>
        </svg>
        LinkedIn
      </a>
    </section>
  </body>
</html>
