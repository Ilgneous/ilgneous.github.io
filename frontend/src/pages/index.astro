---
import "../styles/global.css";
import Counter from "../components/Counter.svelte";
import { getCollection } from "astro:content";

interface Project { title: string; href?: string; tech?: string[] }
const B = import.meta.env.BASE_URL;

// Choose API base: use env, else localhost in dev, else no API
const API =
  import.meta.env.PUBLIC_API_URL ??
  (import.meta.env.DEV ? "http://localhost:8000" : undefined);

let projects: Project[] = [];

if (API) {
  try {
    const r = await fetch(`${API}/api/projects`);
    if (r.ok) projects = await r.json();
  } catch {
    projects = [];
  }
}

if (projects.length === 0) {
  const entries = await getCollection("projects");
  projects = entries.map((e) => ({
    title: e.data.title,
    href: `/projects/${e.slug}`,
    tech: e.data.tech,
  }));
}
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sivan Syed — Portfolio</title>
    <meta name="description" content="Physics & ECE • Robotics, controls, and systems." />
    <meta property="og:title" content="Sivan Syed — Portfolio" />
    <meta property="og:description" content="Physics & ECE • Robotics, controls, and systems." />
    <meta property="og:image" content={`/og.png`} />
    <link rel="icon" href={`/favicon.svg`} />
  </head>
  <body class="min-h-screen overflow-x-hidden bg-gradient-to-b from-black via-zinc-950 to-black text-zinc-100 antialiased selection:bg-indigo-500/20">
    {/* Decorative background */}
    <div aria-hidden class="pointer-events-none fixed inset-0 -z-20">
      <div class="absolute inset-0 [mask-image:radial-gradient(70%_50%_at_50%_0%,black,transparent)]">
        <div class="absolute inset-0 opacity-[0.04] [background-image:linear-gradient(to_right,theme(colors.zinc.400/20)_1px,transparent_1px),linear-gradient(to_bottom,theme(colors.zinc.400/20)_1px,transparent_1px)] [background-size:40px_40px] [background-position:center]"></div>
        <div class="absolute -top-24 left-1/2 h-[36rem] w-[72rem] -translate-x-1/2 rounded-full bg-gradient-to-r from-zinc-200/10 via-indigo-400/15 to-zinc-200/10 blur-3xl"></div>
      </div>
    </div>

    {/* Header (matches tutoring) */}
    <header class="sticky top-0 z-50 backdrop-blur supports-[backdrop-filter]:bg-zinc-950/55 border-b border-zinc-800/60">
      <div class="mx-auto flex max-w-7xl items-center justify-between gap-4 px-6 md:px-12 lg:px-20 py-4">
        <a href={`${B}`} class="group flex items-center gap-3">
          <img src={`/favicon.svg`} alt="Logo" class="size-9 transition-transform duration-300 group-hover:rotate-6" />
          <div>
            <h1 class="text-2xl font-semibold tracking-tight">Sivan Syed</h1>
            <p class="text-xs text-zinc-400">Physics & ECE • Robotics • Controls • Systems</p>
          </div>
        </a>
        <nav class="flex items-center gap-2 text-sm">
          <a class="navlink" href={`${B}`}>Home</a>
          <a class="navlink" href={`${B}projects`}>Projects</a>
          <a class="navlink" href={`${B}tutoring`}>Tutoring</a>
          <a class="navlink" href={`${B}now`}>Now</a>
          <a class="navlink" href={`/SyedS_ResumeELC_Print.pdf`} target="_blank">Resume</a>
        </nav>
      </div>
    </header>

    {/* Main */}
    <main class="mx-auto max-w-[90rem] px-6 md:px-12 lg:px-20 py-10 md:py-14 space-y-24">
      {/* Hero */}
      <section class="mx-auto max-w-6xl">
        <div class="flex flex-col-reverse items-start justify-between gap-8 md:flex-row md:items-center">
          <div class="max-w-3xl">
            <p class="text-xs uppercase tracking-[0.2em] text-zinc-400/90">Portfolio • Robotics • Controls • Applied Physics</p>
            <h2 class="mt-3 text-4xl font-bold leading-tight md:text-5xl">
              <span class="bg-gradient-to-r from-zinc-100 via-zinc-400 to-zinc-100 bg-clip-text text-transparent [text-shadow:0_0_0.5px_rgba(255,255,255,0.35)] animate-shimmer">Building systems that blend</span>
              <span class="block text-zinc-300/90">theory → computation → hardware</span>
            </h2>
            <p class="mt-4 text-lg text-zinc-300/90">
              I design and prototype across ECE, physics, and mechanics—turning equations into working hardware and clean software.
            </p>
            <div class="mt-6 flex flex-wrap gap-3 text-sm">
              <a href={`${B}projects`} class="btn-primary">View projects</a>
              <a href={`${B}tutoring`} class="btn-ghost">Tutoring</a>
            </div>
          </div>
          <figure class="mx-auto max-w-md flex-1 text-center md:mx-0">
            <img src={`/vortex_animation.gif`} alt="Vortex animation" class="mx-auto block aspect-video w-full rounded-2xl border border-zinc-800/70 bg-zinc-900/20 object-cover shadow-[inset_0_1px_0_rgba(255,255,255,0.05)]" loading="lazy" decoding="async" />
            <figcaption class="mt-2 text-xs text-zinc-500">Vortex animation demonstrating fluid dynamics.</figcaption>
          </figure>
        </div>
      </section>

      <hr class="section-divider-glow" />

      {/* What I do */}
      <section class="section">
        <h3 class="section-title">What I do</h3>
        <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
          <div class="card">
            <div class="card-border"></div>
            <h4 class="font-medium">Systems & Hardware</h4>
            <p class="mt-2 text-sm text-zinc-300">
              Robotics, embedded, digital logic, and device physics—designing reliable systems that work end to end.
            </p>
          </div>

          <div class="card">
            <div class="card-border"></div>
            <h4 class="font-medium">Theory → Practice</h4>
            <p class="mt-2 text-sm text-zinc-300">
              From Lagrangians and Maxwell to Verilog and firmware—bridging mathematical models with real hardware.
            </p>
          </div>

          <div class="card">
            <div class="card-border"></div>
            <h4 class="font-medium">Computational Modeling</h4>
            <p class="mt-2 text-sm text-zinc-300">
              Building simulations for circuits, materials, and dynamics using Python, MATLAB, and C++ to validate design choices before fabrication.
            </p>
          </div>

          <div class="card">
            <div class="card-border"></div>
            <h4 class="font-medium">Design & Communication</h4>
            <p class="mt-2 text-sm text-zinc-300">
              Creating clear documentation, visuals, and portfolio-ready deliverables that communicate engineering intent to both technical and non-technical audiences.
            </p>
          </div>
        </div>
      </section>


      <hr class="section-divider-glow" />

      {/* Featured Projects */}
      <section class="section">
        <h3 class="section-title">Featured projects</h3>
        <div class="mt-6 grid grid-cols-1 gap-6 sm:grid-cols-2">
          {projects.slice(0, 6).map((p) => (
            <a href={p.href ?? '#'} class="card group block">
              <div class="card-border"></div>
              <div class="flex items-start justify-between gap-3">
                <h4 class="font-medium group-hover:underline decoration-zinc-400/30 underline-offset-4">{p.title}</h4>
                <span aria-hidden class="text-zinc-500 transition-transform duration-300 group-hover:translate-x-0.5">→</span>
              </div>
              {p.tech?.length ? (
                <ul class="mt-2 flex flex-wrap gap-2 text-xs text-zinc-400">
                  {p.tech.map((t) => (
                    <li class="rounded-md border border-zinc-800/70 bg-zinc-900/40 px-2 py-1">{t}</li>
                  ))}
                </ul>
              ) : null}
            </a>
          ))}
        </div>
        <div class="mt-6">
          <a href={`${B}projects`} class="btn-ghost">See all projects</a>
        </div>
      </section>

      <hr class="section-divider-glow" />

      {/* Goals */}
      <section class="section">
        <h3 class="section-title">What's my goal</h3>
        <div class="grid grid-cols-1 gap-6">
          <div class="card">
            <div class="card-border"></div>
            <p class="text-m text-zinc-300">
              I aim to push the boundaries of science and engineering in physics-driven fields—plasma, condensed matter, and robotics—by 
              pairing rigorous theoretical foundations with innovative hardware and scalable computational tools.
            </p>
            <p class="mt-3 text-m text-zinc-300">
              My long-term goal is to design systems that reveal new physical phenomena and enable technologies that make them practical. From 
              high-energy plasma diagnostics and precision instrumentation to intelligent, adaptive robotic platforms. I want to be at the 
              intersection where <span class="text-zinc-100 font-medium">scientific insight becomes engineered reality</span>.
            </p>
            <p class="mt-3 text-m text-zinc-300">
              Every project I build, whether it's a balancing robot, a semiconductor simulation, or an embedded control loop, is a step toward 
              mastering that full stack: <span class="text-zinc-100 font-medium">theory → computation → implementation → impact</span>. 
              I'm motivated by curiosity, precision, and the pursuit of elegance in both equations and hardware.
            </p>
          </div>
        </div>
      </section>


      <hr class="section-divider-glow" />

      {/* Coursework */}
      <section class="section">
        <h3 class="section-title">Academic coursework</h3>
        <ul class="mt-4 grid grid-cols-1 gap-3 text-sm text-zinc-300 sm:grid-cols-2">
          <li><span class="font-medium text-zinc-200">Physics:</span> Quantum I/II, Statistical Mechanics, Thermodynamics, Classical Dynamics, Relativity</li>
          <li><span class="font-medium text-zinc-200">Electrical Engineering:</span> Electronic Circuits Lab, Digital Logic, Semiconductor Devices, Embedded, Signals</li>
          <li><span class="font-medium text-zinc-200">Mathematics:</span> Real Analysis, Complex Analysis, Linear Algebra, Differential Equations</li>
          <li><span class="font-medium text-zinc-200">Mechanical Engineering:</span> Fluid Dynamics, Mechanics of Solids, Thermodynamics</li>
          <li><span class="font-medium text-zinc-200">Applied:</span> Computational Physics, EM, Fluid Dynamics, Mechanics of Solids</li>
          <li><span class="font-medium text-zinc-200">Misc:</span> German Language, Materials Experiments, Software Design</li>
        </ul>
      </section>

      <hr class="section-divider-glow" />

      {/* Hobbies */}
      <section class="section">
        <h3 class="section-title">Outside the lab</h3>
        <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
          <div class="card">
            <div class="card-border"></div>
            <p class="text-l text-zinc-300">
              Outside of academics and engineering projects, I enjoy exploring a plethora of topics.
              I train in Taekwondo & Muay Thai, which I've loved since I was a kid, and I have a love-hate relationship with bouldering (I have commitment issues).
              Reading recommendations (favorite series: <em>Red Rising</em>) from Science Fiction to Neuroscience and History to Philosophy are always welcome.
              I thrive in board games and strategy games, especially when they involve complex decision-making and teamwork (or deception).
              Most of all, I'm passionate about long walks that turn into longer conversations.
            </p>
          </div>
          <div class="card">
            <div class="card-border"></div>
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                <!-- Left column: stack Red Rising over Root -->
                <div class="flex flex-col gap-3">
                  <img src="/Redrising.webp"
                      alt="Red Rising"
                      class="aspect-[4/3] w-full rounded-xl border border-zinc-800/70 object-cover"
                      loading="lazy" />

                  <img src="/Root.webp"
                      alt="Root"
                      class="aspect-[5/3] w-full self-center rounded-xl border border-zinc-800/70 object-cover"
                      loading="lazy" />
                </div>

                <!-- Right column -->
                <img src="/NoLongerHuman.webp"
                    alt="No Longer Human"
                    class="aspect-[3/4] w-full rounded-xl border border-zinc-800/70 object-cover"
                    loading="lazy" />
              </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="mx-auto max-w-7xl px-6 md:px-12 lg:px-20 pb-10 pt-6 text-sm text-zinc-500/90">
      <div class="flex items-center justify-between border-t border-zinc-800/70 pt-4">
        <p>© {new Date().getFullYear()} Sivan Syed</p>
        <a class="underline decoration-zinc-400/30 underline-offset-2 hover:decoration-zinc-200/60" href={`${B}`}>Back to home</a>
      </div>
    </footer>

    {/* Optional interactive demo */}
    <!-- <section class="mx-auto max-w-6xl px-6 md:px-12 lg:px-20 py-10">
      <h2 class="text-xl font-semibold">Interactive demo</h2>
      <Counter client:load baseUrl={B} soundSrc="/leaf-crunch.mp3" />
    </section> -->
  </body>
</html>
